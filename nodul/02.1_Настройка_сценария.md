---
url: "https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/"
title: "02.1 Настройка сценария | Nodul"
---

Содержание этой страницы

## Сохранение сценария [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D1%8F "Прямая ссылка на Сохранение сценария")

После добавления сценария рекомендуется изменить название сценария **(** **1** **)** при необходимости добавить его описание **(** **2** **)** и сохранить изменения, нажав на кнопку **Сохранить (** **3** **)**.

![](https://docs.nodul.ru/img/notion/0a6827ba-b014-4a13-8bd8-cac9382e1c0b/Untitled.png)

предупреждение

Кнопка **Сохранить** активируется сразу после внесения любых изменений в сценарий или в узлы сценария. Чтобы не терять изменения в сценарии, необходимо регулярно сохранять их.

## Запуск сценария [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D1%8F "Прямая ссылка на Запуск сценария")

### Однократный запуск сценария [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%BE%D0%B4%D0%BD%D0%BE%D0%BA%D1%80%D0%B0%D1%82%D0%BD%D1%8B%D0%B9-%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D1%8F "Прямая ссылка на Однократный запуск сценария")

подсказка

Перед запуском сценария его необходимо создать и настроить. С основными шагами по настройке сценария можно ознакомится в разделе [Первые шаги](https://docs.nodul.ru/docs/5c888147-5d42-4315-8cfc-3bdd47287501).

Для однократного запуска сценария требуется сохранить все нужные изменения в сценарии и нажать на кнопку **Запустить один раз**.

![](https://docs.nodul.ru/img/notion/f8a4a051-6cfc-4a59-b54b-07aa72f8fd3f/Untitled.png)

После нажатия на кнопку и в зависимости от узла триггера:

- Если узлом триггером является APP узел, то необходимо в стороннем приложении создать событие, инициирующее выполнение сценария;

- Если узлом триггером является **Trigger on Webhook**, то необходимо отправить HTTP запрос на адрес узла **Trigger on Webhook**;

- Если узлом триггером является **Trigger on Schedule** или **Trigger on Run once**, то дополнительных действий не требуется.

После того как сценарий выполнится:

- В правой верхней части узлов появятся иконки успешного выполнения или ошибок, по нажатию на которые можно посмотреть подробную информацию;

![](https://docs.nodul.ru/img/notion/d58b311e-3bf0-4155-8a85-44caedd03368/Untitled.png)

- В истории выполнения сценариев появится новая строка;

![](https://docs.nodul.ru/img/notion/8104bed6-1d08-4894-b8dd-72be8dad9ca9/Untitled.png)

- Во вспомогательном окне для настройки полей узлов на вкладке **Данные** появятся данные предыдущих узлов;

![](https://docs.nodul.ru/img/notion/478a4a0a-55b6-4a81-97d2-bac44f85f257/Untitled.png)

- Во вспомогательном окне для настройки полей узлов на вкладке **Переменные** появятся данные переменных, если они были созданы в сценарии.

![](https://docs.nodul.ru/img/notion/12471fe9-fcb5-4eb2-9e7e-62d521ba04b3/Untitled.png)

Однократный запуск сценария можно остановить, нажав на кнопку **Остановить.**

![](https://docs.nodul.ru/img/notion/e97a483e-22f1-4919-9366-9aadf461642c/Untitled.png)

## Активация сценария [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%B0%D1%86%D0%B8%D1%8F-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D1%8F "Прямая ссылка на Активация сценария")

Чтобы сценарий выполнялся автоматически, его необходимо активировать. Когда сценарий активен, он будет выполняться автоматически в соответствии с триггером сценария, например, по расписанию или при возникновении события в стороннем приложении. Активация сценария гарантирует его непрерывную работу без ручного вмешательства, что позволяет автоматизировать ваши задачи.

В нижней части страницы сценария доступен переключатель **Активный** для настройки активности сценария.

![](https://docs.nodul.ru/img/notion/1bb803b4-4858-430f-a688-5dbe8d5332ee/Untitled.png)

предупреждение

Уведомления о результатах выполнения узлов сценария отображаются только при условии ручного запуска сценария.

### Ветки сценария [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%B2%D0%B5%D1%82%D0%BA%D0%B8-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D1%8F "Прямая ссылка на Ветки сценария")

Для настройки сценария существуют две ветки:

- **Development** \- ветка для тестирования настройки сценария и результатов обработки данных;

- **Production** \- ветка для хранения рабочей версии сценария.

**Development-ветка** сценария и **Production-ветка** сценария могут запускаться независимо друг от друга. Таким образом, существует возможность обеспечивать требования бизнес-процесса работой **Production-ветка** сценария и при этом параллельно создавать новые **Development-ветки** сценария для тестирования доработок сценария.

Для создания новой **Development-версии** сценария и ее переноса на **Production** ветку необходимо:

1. Сохранить текущую версию сценария по кнопке **Сохранить**;

![](https://docs.nodul.ru/img/notion/732aff68-e283-4e2b-96b9-9b341042d3f6/Untitled.png)

2. Просмотреть наличие очередной **Development-версии** в списке версий;

![](https://docs.nodul.ru/img/notion/f58f21e8-e0ae-4214-a270-f796230b8a53/Untitled.png)

3. Нажать на кнопку **Развернуть;**

![](https://docs.nodul.ru/img/notion/76db8ee9-8a8a-4241-b88c-b9dc429fd08f/Untitled.png)

4. Просмотреть наличие **Production-версии** в списке версий.

![](https://docs.nodul.ru/img/notion/ae22358e-f44e-49ec-8aed-6204a066d610/Untitled.png)

подсказка

Метка “Текущая” указывает на текущую версию сценария, которая отображается на экране. Метка “Production” указывает на **Production-версию** сценария.

При необходимости можно “откатить” **Production-версию** сценария **.** Для этого необходимо:

1. Выбрать любую предыдущую версию сценария:

![](https://docs.nodul.ru/img/notion/39c7af26-3dbc-4116-ba4c-b172e767afad/Untitled.png)

2. Нажать на кнопку **Развернуть**, опубликовав в ветку **Production** предыдущую версию сценария:

![](https://docs.nodul.ru/img/notion/e987fa7a-8b9b-49cb-804e-a6058ac877e9/Untitled.png)

3. Просмотреть метки “Текущая” и “Production” у предыдущей версии сценария.

## Триггеры и ветки сценария [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D1%82%D1%80%D0%B8%D0%B3%D0%B3%D0%B5%D1%80%D1%8B-%D0%B8-%D0%B2%D0%B5%D1%82%D0%BA%D0%B8-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D1%8F "Прямая ссылка на Триггеры и ветки сценария")

В каждом сценарии есть узел триггер, который инициирует запуск сценария. Важно понимать, как работают узлы триггеры в зависимости от того, развернут ли сценарий.

### Trigger on Webhook [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#trigger-on-webhook "Прямая ссылка на Trigger on Webhook")

Узел **[Trigger on Webhook](https://docs.nodul.ru/docs/43df593c-f22b-47df-8429-6f53e9fa4aaa)** инициирует запуск сценария, если на одну из версий адреса узла ( **Production (** **1** **)** или **Development (** **2** **)**) был отправлен HTTP запрос.

![](https://docs.nodul.ru/img/notion/0c193db1-3779-4557-b23e-fcfe674e99a7/f7efb2c0-5258-47f2-ab79-950c59a7990a.png)

- Запуск **Production-ветки** сценария инициируется запросом, отправленным на **Production-версию** URL-адреса узла **Trigger on Webhook.** Для того, чтобы запрос успешно отправлялся необходимо развернуть сценарий **(** **1** **)** и убедится в том, что сценарий активен **(** **2** **)**.

![](https://docs.nodul.ru/img/notion/2babb671-6d22-44c9-b3d7-69f680991bba/Untitled.png)

- Запуск **Development-ветки** сценария инициируется запросом, отправленным на **Development-версию** URL-адреса узла **Trigger on Webhook**. Для того, чтобы отправленный запрос был принят сценарием и успешно обработался необходимо:

**(** **1** **)** или предварительно запустить сценарий, нажав на кнопку **Запустить один раз;**

**(** **2** **)** или активировать сценарий с помощью переключателя **Активный**.

![](https://docs.nodul.ru/img/notion/5f262cb5-7bde-4c2a-a2d5-a310d951b336/Untitled.png)

### Trigger on **Schedule** [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#trigger-on-schedule "Прямая ссылка на trigger-on-schedule")

Узел **[Trigger on Schedule](https://docs.nodul.ru/docs/d24b376b-3432-4568-8669-fda5405736b7)** инициирует запуск **Production-ветки** сценария согласно настроенному в узле расписанию, если сценарий активен.

**Development-ветка** сценария не запускается по расписанию узла **Trigger on Schedule**, но запуск сценария все еще можно инициировать вручную по нажатию на кнопку **Запустить один раз.**

![](https://docs.nodul.ru/img/notion/eda789fc-eea5-4a3d-929e-00753110a8d0/Untitled.png)

### Trigger on Run once [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#trigger-on-run-once "Прямая ссылка на Trigger on Run once")

Узел **[Trigger on Run once](https://docs.nodul.ru/docs/18199eec-a145-41b8-8cfc-2319efe3530a)** инициирует запуск **Development-ветки** сценария по нажатию на кнопку **Запустить один раз. Production-ветка** сценария не запускается по нажатию на кнопку **Запустить один раз.**

![](https://docs.nodul.ru/img/notion/4f623687-fe6d-4fc0-ab34-6a6656e7516a/Untitled.png)

подсказка

Допустимо наличие нескольких узлов триггеров в одном сценарии, например, **Trigger on Run once** для тестирования работы всех остальных узлов сценария при его настройке и **Trigger on Webhook** для тестирования всего сценария с учетом поступающих извне данных.

### APPs Triggers [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#apps-triggers "Прямая ссылка на APPs Triggers")

Узлы триггеры приложений инициируют запуск сценария по разному в зависимости от ветки сценария:

- **Production-ветка** сценария запускается узлом триггером приложения один раз в определенный промежуток времени в зависимости от тарифного плана при условии того, что инициирующее событие в приложении произошло.

![](https://docs.nodul.ru/img/notion/b4bb3d8e-92d5-42b4-bacc-7e2eaeaf24ff/Untitled.png)

подсказка

В тарифном плане **Starter** узлы триггеры срабатывают раз в 10 минут. В тарифном плане **Grow**\- раз в 5 минут. В тарифном плане **Prime**\- раз в 2 минуты.

предупреждение

Исключение из правил составляют узлы с комментарием **Instant** в названии. Они запускаются сразу после того. как инициирующее событие в стороннем приложении произошло.

![](https://docs.nodul.ru/img/notion/fccc4919-4b7c-4553-b34d-ad81d54653dc/Untitled.png)

- **Development-ветка** сценария не запускается узлом триггером приложения , но сценарий все еще можно запустить однократно по нажатию на кнопку **Запустить один раз**. После такого однократного запуска сценарий выполнится, если в приложении произойдет инициирующее событие.

## Другие настройки [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8 "Прямая ссылка на Другие настройки")

### Выравнивание узлов [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%B2%D1%8B%D1%80%D0%B0%D0%B2%D0%BD%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%83%D0%B7%D0%BB%D0%BE%D0%B2 "Прямая ссылка на Выравнивание узлов")

В нижней части страницы сценария доступна кнопка **Выровнять узлы** для выравнивания цепи сценария по горизонтали, если узлы соединены связями.

![](https://docs.nodul.ru/img/notion/a8a0e222-4432-46ed-9124-75a7c686cf78/Untitled.png)

подсказка

Если узлы сценария не связаны, то ряд обособленных узлов выровняется по вертикали.

### Добавление стикеров [​](https://docs.nodul.ru/docs/af28da79-1912-49eb-9877-07c99c16218d/\#%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D1%82%D0%B8%D0%BA%D0%B5%D1%80%D0%BE%D0%B2 "Прямая ссылка на Добавление стикеров")

В нижней части страницы сценария доступна кнопка **Добавить стикер** для добавления стикеров. Стикеры не требуются для выполнения каких-либо функций, но могут использоваться для комментариев или хранения нужной информации о сценарии. После добавления стикера доступен ввод текста, его форматирование, а также добавление ссылок и частей кода.

![](https://docs.nodul.ru/img/notion/ae62136e-57e9-445a-b1c9-3dbd1d959f03/Untitled.png)

Добавленный стикер можно увеличить или уменьшить **(** **1** **)**, потянув за его края. По нажатию ПКМ на стикер можно:

- **Скопировать (** **2** **)** стикер, чтобы продублировать его в текущем или другом сценарии;

- **Удалить (** **3** **)** стикер.

![](https://docs.nodul.ru/img/notion/f6016895-f23d-459e-b6d1-3452c6732277/Untitled.png)